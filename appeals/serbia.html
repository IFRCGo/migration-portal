<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title></title>

    <!-- CSS Stylesheets -->
    <link rel="stylesheet" type="text/css" href="../css/bootstrap.v3.min.css">
    <link rel="stylesheet" type="text/css" href="../css/ie10-viewport-bug-workaround.css">
    <link rel="stylesheet" type="text/css" href="../css/social-icons.css">
    <link rel="stylesheet" type="text/css" href="../css/portal.css">
    <link rel="stylesheet" type="text/css" href="../css/appeals.css">

    <!-- Fontawesome Icons -->
    <script src="https://use.fontawesome.com/4dc60e70fb.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Google Analytics Script-->
    <!--<script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        
        ga('create', 'UA-83897837-1', 'auto');
        ga('send', 'pageview');
    </script>-->

</head>

<body>
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">IFRC Europe Migration Response</a>
      </div>
      <div id="navbar" class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li class="active"><a href="../index.html">IM Portal</a></li>
          <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">FedNet Links <span class="caret"></span></a>
                  <ul class="dropdown-menu">
                        <li><a href="https://fednet.ifrc.org/en/resources/migration/">Global Migration</a></li>
                        <li><a href="https://fednet.ifrc.org/en/offices/europe/current-operations/migration-in-europe/">European Migration</a></li>
                        <li><a href="http://www.ifrc.org/en/publications-and-reports/appeals/?ac=&at=0&c=18&co=&dt=1&f=&re=&t=&ti=&zo=SP5">Appeals &amp; Reports</a></li>
                  </ul>
          </li>
          <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Appeals <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                          <li><a href="croatia.html">Croatia</a></li>
                          <li><a href="fyrom.html">fYRoM</a></li>
                          <li><a href="greece.html">Greece</a></li>
                          <li><a href="hungary.html">Hungary</a></li>
                          <li><a href="italy.html">Italy</a></li>
                          <li><a href="#">Serbia</a></li>
                    </ul>
            </li>
          <li><a href="https://www-secure.ifrc.org/DMISII/Pages/00_Home/login.aspx">DMIS</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right hidden-md-down">
          <li class="hidden-md-down"><a href="http://www.ifrc.org/"><img alt="IFRC Logo" height="18" src="../img/IFRC_logo_en.svg"></a></li>
        </ul>
      </div><!-- /.nav-collapse -->
    </div><!-- /.container-fluid -->
  </nav>

  <main class="container-fluid">
    <div class="col-md-6 col-sm-12">
      <div id="map"></div>
    </div>
    <div class="col-md-6 col-sm-12">
      <h1>Serbia - Population Movement (MDRRS011)</h1>
    </div>
  </main>

  <footer class="footer">
    <div class="container-fluid">
      <div class="row">
        <div class="col-xs-8">
          <p class="text-muted footerText">If you don't find what you're looking for, <a href="mailto:im.migration@ifrc.org?subject=IM_Europe-resources-online-feedback">contact us</a> and we'll help you find it or work with you to develop something new.</p>          
        </div>
        <div id="social" class="col-xs-4">
          <div class="center-block pull-right">
              <a href="https://www.youtube.com/channel/UCZ8xf9ZrTOv7SeYK7U5eKVg"><i id="social-youtube" class="fa fa-youtube-square fa-3x social"></i></a>
              <a href="https://twitter.com/Federation"><i id="social-tw" class="fa fa-twitter-square fa-3x social"></i></a>
              <a href="https://medium.com/@IFRC"><i id="social-medium" class="fa fa-medium fa-3x social"></i></a>
              <a href="mailto:im.migration@ifrc.org"><i id="social-em" class="fa fa-envelope-square fa-3x social"></i></a>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <script type="text/javascript" src="../js/jquery.min.js"></script>
  <script type="text/javascript" src="../js/d3.v4.min.js"></script>
  <script type="text/javascript" src="../js/topojson.v1.min.js"></script>
  <script type="text/javascript" src="../js/bootstrap.min.js"></script>
  <script type="text/javascript" src="../js/data_connections.js"></script>
<script>

// Create a unit projection.
var projection = d3.geoEquirectangular();

// Create a path generator.
var path = d3.geoPath()
    .projection(projection);

var svg = d3.select("div#map")
   .append("div")
   .classed("svg-container", true) //container class to make it responsive
   .append("svg")
   //responsive SVG needs these 2 attributes and no width and height attr
   .attr("preserveAspectRatio", "xMinYMin meet")
   .attr("viewBox", "0 0 475 600")
   //class to make it responsive
   .classed("svg-content-responsive", true);

d3.json("../geo/RS.json", function(error, rs) {
    if (error) throw error;

    var width = 500,
        height = 500;

    console.log(rs);

    var country = topojson.feature(rs, rs.objects.SRB_adm1);

    projection
        .scale(1)
        .translate([0, 0]);

    // Compute the bounds of a feature of interest, then derive scale & translate.
    var b = path.bounds(country),
        s = .95 / Math.max((b[1][0] - b[0][0]) / width, (b[1][1] - b[0][1]) / height),
        t = [(width - s * (b[1][0] + b[0][0])) / 2, (height - s * (b[1][1] + b[0][1])) / 2];

    // Update the projection to use computed scale & translate.
    projection
        .scale(s)
        .translate(t);

    svg.append("path")
        .datum(country)
        .attr("class", "adm")
        .attr("d", path);

    svg.append("path")
        .datum(topojson.mesh(rs, rs.objects.SRB_adm1, function(a, b) { return a.id !== b.id; }))
        .attr("class", "adm-border")
        .attr("d", path);
});

function sizeChange() {
      d3.select("g").attr("transform", "scale(" + $("#map").width()/900 + ")");
      $("svg").height($("#map").width()*0.618);
}

</script>
